const a0_0x172864=a0_0x4f1f;(function(_0x211212,_0x411f41){const _0x299ecf=a0_0x4f1f,_0x506de2=_0x211212();while(!![]){try{const _0x5349c6=parseInt(_0x299ecf(0x14b))/0x1*(-parseInt(_0x299ecf(0x149))/0x2)+parseInt(_0x299ecf(0x11c))/0x3*(-parseInt(_0x299ecf(0x17a))/0x4)+-parseInt(_0x299ecf(0x14f))/0x5*(parseInt(_0x299ecf(0x11d))/0x6)+-parseInt(_0x299ecf(0x171))/0x7+-parseInt(_0x299ecf(0x111))/0x8+-parseInt(_0x299ecf(0x164))/0x9*(parseInt(_0x299ecf(0x115))/0xa)+parseInt(_0x299ecf(0x139))/0xb;if(_0x5349c6===_0x411f41)break;else _0x506de2['push'](_0x506de2['shift']());}catch(_0x25ca48){_0x506de2['push'](_0x506de2['shift']());}}}(a0_0x160c,0x31a71));import{getConfigAddresses,extractWireguardParams,generateRemark,randomUpperCase,getRandomPath,isIPv6,isIPv4}from'./helpers';import{getDataset}from'../kv/handlers';import{isDomain}from'../helpers/helpers';async function buildClashDNS(_0x11a405,_0x3e1159,_0x32e893){const _0x1081d2=a0_0x4f1f,{remoteDNS:_0x453e8c,localDNS:_0x299b00,vlessTrojanFakeDNS:_0x47b2be,outProxyParams:_0x460008,enableIPv6:_0x3e79ed,warpFakeDNS:_0x4299af,warpEnableIPv6:_0x1235a8,bypassIran:_0x2cf537,bypassChina:_0x5b5f08,bypassRussia:_0x5282bb,customBypassRules:_0x57ad56,customBlockRules:_0x25f71a}=_0x11a405,_0xea39eb=_0x1235a8?[_0x1081d2(0x18a),_0x1081d2(0x12b),_0x1081d2(0x187),_0x1081d2(0x113)]:[_0x1081d2(0x18a),_0x1081d2(0x12b)],_0x29c1bf=_0x47b2be&&!_0x32e893||_0x4299af&&_0x32e893,_0x2586a3=_0x3e79ed&&!_0x32e893||_0x1235a8&&_0x32e893,_0x397bf2=_0x57ad56['split'](',')[_0x1081d2(0x129)](_0x1e4a2b=>isDomain(_0x1e4a2b)),_0x2edf30=_0x2cf537||_0x5b5f08||_0x5282bb,_0x4de205=[{'rule':_0x2cf537,'geosite':'ir'},{'rule':_0x5b5f08,'geosite':'cn'},{'rule':_0x5282bb,'geosite':'ru'}],_0x186c3f={'enable':!![],'listen':_0x1081d2(0x119),'ipv6':_0x2586a3,'respect-rules':!![],'use-hosts':!![],'use-system-hosts':![],'nameserver':_0x32e893?_0xea39eb[_0x1081d2(0x132)](_0x187eb4=>_0x3e1159?_0x187eb4+_0x1081d2(0x13d):_0x187eb4+_0x1081d2(0x143)):[_0x3e1159?_0x453e8c+_0x1081d2(0x120):_0x453e8c+_0x1081d2(0x143)],'proxy-server-nameserver':[_0x299b00+_0x1081d2(0x134)]};if(_0x3e1159&&!_0x32e893){const _0x301ae6=JSON[_0x1081d2(0x15e)](_0x460008)['server'];if(isDomain(_0x301ae6))_0x186c3f[_0x1081d2(0x127)]={[_0x301ae6]:_0x3e1159?_0x453e8c+_0x1081d2(0x120):_0x453e8c+_0x1081d2(0x143)};}if(_0x2edf30){const _0x348180=[];_0x4de205[_0x1081d2(0x131)](({rule:_0x5007cb,geosite:_0x374ced})=>{_0x5007cb&&_0x348180['push'](_0x374ced);}),_0x186c3f[_0x1081d2(0x127)]={..._0x186c3f[_0x1081d2(0x127)],[_0x1081d2(0x176)+_0x348180[_0x1081d2(0x17e)](',')]:[_0x299b00+'#DIRECT']};}_0x397bf2[_0x1081d2(0x131)](_0x162b83=>{const _0x4cbb73=_0x1081d2;_0x186c3f[_0x4cbb73(0x127)]={..._0x186c3f[_0x4cbb73(0x127)],['+.'+_0x162b83]:[_0x299b00+_0x4cbb73(0x134)]};});if(_0x29c1bf)Object[_0x1081d2(0x141)](_0x186c3f,{'enhanced-mode':_0x1081d2(0x17c),'fake-ip-range':_0x1081d2(0x18b),'fake-ip-filter':[_0x1081d2(0x165)]});return _0x186c3f;}function buildClashRoutingRules(_0x2fe1c0){const _0x3012aa=a0_0x4f1f,{bypassLAN:_0x2d7c52,bypassIran:_0x435e3b,bypassChina:_0xf3ad63,bypassRussia:_0x3178cb,blockAds:_0x45ce84,blockPorn:_0x34aee5,blockUDP443:_0x351350,customBypassRules:_0x37ea0d,customBlockRules:_0x34408f}=_0x2fe1c0,_0x349e25=_0x37ea0d?_0x37ea0d[_0x3012aa(0x18e)](','):[],_0x490bad=_0x34408f?_0x34408f[_0x3012aa(0x18e)](','):[],_0xe0ddf1=[{'rule':_0x2d7c52,'type':_0x3012aa(0x188),'noResolve':!![],'ruleProvider':{'format':_0x3012aa(0x186),'geosite':_0x3012aa(0x15d),'geoip':'private-cidr','geositeURL':'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.yaml','geoipURL':_0x3012aa(0x12d)}},{'rule':_0x435e3b,'type':'direct','ruleProvider':{'format':'text','geosite':'ir','geoip':_0x3012aa(0x17d),'geositeURL':_0x3012aa(0x12a),'geoipURL':_0x3012aa(0x117)}},{'rule':_0xf3ad63,'type':'direct','ruleProvider':{'format':'yaml','geosite':'cn','geoip':'cn-cidr','geositeURL':_0x3012aa(0x13f),'geoipURL':_0x3012aa(0x124)}},{'rule':_0x3178cb,'type':'direct','ruleProvider':{'format':_0x3012aa(0x186),'geosite':'ru','geoip':_0x3012aa(0x15b),'geositeURL':_0x3012aa(0x166),'geoipURL':_0x3012aa(0x12e)}},{'rule':!![],'type':_0x3012aa(0x147),'ruleProvider':{'format':_0x3012aa(0x148),'geosite':'malware','geositeURL':_0x3012aa(0x167)}},{'rule':!![],'type':_0x3012aa(0x147),'ruleProvider':{'format':_0x3012aa(0x148),'geosite':'phishing','geositeURL':_0x3012aa(0x13a)}},{'rule':!![],'type':_0x3012aa(0x147),'ruleProvider':{'format':_0x3012aa(0x148),'geosite':_0x3012aa(0x114),'geositeURL':_0x3012aa(0x146)}},{'rule':_0x45ce84,'type':_0x3012aa(0x147),'ruleProvider':{'format':'text','geosite':_0x3012aa(0x122),'geositeURL':_0x3012aa(0x145)}},{'rule':_0x34aee5,'type':_0x3012aa(0x147),'ruleProvider':{'format':_0x3012aa(0x148),'geosite':'nsfw','geositeURL':'https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/nsfw.txt'}}];function _0x12bd1b(_0xf043eb,_0x5c5874,_0x32156d,_0x9666dd){const _0x2ab92b=_0x3012aa,_0x3182ef=_0x5c5874==='text'?'txt':_0x5c5874;return{[_0xf043eb]:{'type':_0x2ab92b(0x138),'format':_0x5c5874,'behavior':_0x32156d,'url':_0x9666dd,'path':_0x2ab92b(0x135)+_0xf043eb+'.'+_0x3182ef,'interval':0x15180}};}const _0x32199f=[],_0x1035bb=[],_0x17b898=[],_0x31101a=[],_0x46c18a={};_0xe0ddf1[_0x3012aa(0x131)](({rule:_0x38ca32,type:_0x116853,ruleProvider:_0x4d2d59,noResolve:_0x4bc32a})=>{const _0xabee98=_0x3012aa,{geosite:_0x1a43f2,geoip:_0x121388,geositeURL:_0x286600,geoipURL:_0x54fd84,format:_0x3e1d0b}=_0x4d2d59;if(_0x38ca32){if(_0x1a43f2){const _0x1a1db6=_0x116853==='direct'?_0x32199f:_0x17b898;_0x1a1db6[_0xabee98(0x15c)]('RULE-SET,'+_0x1a43f2+','+(_0x116853===_0xabee98(0x188)?'DIRECT':_0xabee98(0x144)));const _0x15f5c0=_0x12bd1b(_0x1a43f2,_0x3e1d0b,_0xabee98(0x152),_0x286600);Object[_0xabee98(0x141)](_0x46c18a,_0x15f5c0);}if(_0x121388){const _0x4ff479=_0x116853===_0xabee98(0x188)?_0x1035bb:_0x31101a;_0x4ff479[_0xabee98(0x15c)](_0xabee98(0x17f)+_0x121388+','+(_0x116853===_0xabee98(0x188)?_0xabee98(0x183):_0xabee98(0x144))+(_0x4bc32a?_0xabee98(0x112):''));const _0x399741=_0x12bd1b(_0x121388,_0x3e1d0b,_0xabee98(0x12f),_0x54fd84);Object[_0xabee98(0x141)](_0x46c18a,_0x399741);}}});const _0x268371=(_0x2db0ce,_0xf7ca4)=>{const _0x2bed1a=_0x3012aa;if(isDomain(_0x2db0ce))return _0x2bed1a(0x157)+_0x2db0ce+','+_0xf7ca4;else{const _0x38f458=isIPv4(_0x2db0ce)?_0x2bed1a(0x159):_0x2bed1a(0x13b),_0x40bf9f=isIPv6(_0x2db0ce)?_0x2db0ce[_0x2bed1a(0x16b)](/\[|\]/g,''):_0x2db0ce,_0x422dcf=_0x2db0ce['includes']('/')?'':isIPv4(_0x2db0ce)?_0x2bed1a(0x16f):_0x2bed1a(0x181);return _0x38f458+','+_0x40bf9f+_0x422dcf+','+_0xf7ca4+_0x2bed1a(0x112);}};[..._0x349e25,..._0x490bad][_0x3012aa(0x131)]((_0x54e8f2,_0x19c5b4)=>{const _0x5090b1=_0x3012aa,_0x52ba7f=_0x19c5b4<_0x349e25[_0x5090b1(0x16d)],_0x1b6fa9=_0x52ba7f?_0x5090b1(0x183):_0x5090b1(0x144),_0xc8ad32=_0x52ba7f?isDomain(_0x54e8f2)?_0x32199f:_0x1035bb:isDomain(_0x54e8f2)?_0x17b898:_0x31101a;_0xc8ad32['push'](_0x268371(_0x54e8f2,_0x1b6fa9));});const _0x2b23d5=[..._0x32199f,..._0x1035bb,..._0x17b898,..._0x31101a];return _0x351350&&_0x2b23d5['push'](_0x3012aa(0x173)),_0x2b23d5[_0x3012aa(0x15c)](_0x3012aa(0x158)),{'rules':_0x2b23d5,'ruleProviders':_0x46c18a};}function buildClashVLESSOutbound(_0x19773d,_0x186c52,_0xb3cb7f,_0x2161b1,_0x110ba3,_0xb06faf,_0x45075f){const _0x3b861b=a0_0x4f1f,_0x137c6b=globalThis[_0x3b861b(0x150)]['includes'](_0xb3cb7f)?!![]:![],_0x3a71e7=isIPv6(_0x186c52)?_0x186c52['replace'](/\[|\]/g,''):_0x186c52,_0x42835a={'name':_0x19773d,'type':_0x3b861b(0x14e),'server':_0x3a71e7,'port':+_0xb3cb7f,'uuid':globalThis[_0x3b861b(0x153)],'tls':_0x137c6b,'network':'ws','udp':!![],'ws-opts':{'path':_0xb06faf,'headers':{'host':_0x2161b1},'max-early-data':0xa00,'early-data-header-name':_0x3b861b(0x18d)}};return _0x137c6b&&Object['assign'](_0x42835a,{'servername':_0x110ba3,'alpn':['h2','http/1.1'],'client-fingerprint':'random','skip-cert-verify':_0x45075f}),_0x42835a;}function buildClashTrojanOutbound(_0xe80553,_0x120e44,_0xc5bdec,_0x59e203,_0x2bf476,_0x16a92a,_0x4ca2be){const _0x2ae099=a0_0x4f1f,_0x3e0bc5=isIPv6(_0x120e44)?_0x120e44[_0x2ae099(0x16b)](/\[|\]/g,''):_0x120e44;return{'name':_0xe80553,'type':'trojan','server':_0x3e0bc5,'port':+_0xc5bdec,'password':globalThis[_0x2ae099(0x118)],'network':'ws','udp':!![],'ws-opts':{'path':_0x16a92a,'headers':{'host':_0x59e203},'max-early-data':0xa00,'early-data-header-name':'Sec-WebSocket-Protocol'},'sni':_0x2bf476,'alpn':['h2',_0x2ae099(0x137)],'client-fingerprint':_0x2ae099(0x161),'skip-cert-verify':_0x4ca2be};}function buildClashWarpOutbound(_0xfd790a,_0x38465c,_0x294aee,_0x4f00d8){const _0x2829db=a0_0x4f1f,_0x93dd87=/\[(.*?)\]/,_0xf76499=/[^:]*$/,_0xb1346f=_0x294aee[_0x2829db(0x123)]('[')?_0x294aee['match'](_0x93dd87)[0x1]:_0x294aee['split'](':')[0x0],_0x5e5851=_0x294aee[_0x2829db(0x123)]('[')?+_0x294aee[_0x2829db(0x185)](_0xf76499)[0x0]:+_0x294aee[_0x2829db(0x18e)](':')[0x1],{warpIPv6:_0x33a3c6,reserved:_0x142c51,publicKey:_0x4538ae,privateKey:_0x59be18}=extractWireguardParams(_0xfd790a,_0x4f00d8);return{'name':_0x38465c,'type':'wireguard','ip':_0x2829db(0x154),'ipv6':_0x33a3c6,'private-key':_0x59be18,'server':_0xb1346f,'port':_0x5e5851,'public-key':_0x4538ae,'allowed-ips':['0.0.0.0/0',_0x2829db(0x14c)],'reserved':_0x142c51,'udp':!![],'mtu':0x500,'dialer-proxy':_0x4f00d8};}function buildClashChainOutbound(_0x3563c2){const _0x40a6ce=a0_0x4f1f;if(['socks',_0x40a6ce(0x138)][_0x40a6ce(0x123)](_0x3563c2['protocol'])){const {protocol:_0x431924,server:_0x57f8bc,port:_0x3bce29,user:_0x1fb96f,pass:_0x485621}=_0x3563c2,_0x27616e=_0x431924===_0x40a6ce(0x140)?_0x40a6ce(0x126):_0x431924;return{'name':'','type':_0x27616e,'server':_0x57f8bc,'port':+_0x3bce29,'dialer-proxy':'','username':_0x1fb96f,'password':_0x485621};}const {server:_0x7f9ce3,port:_0x382e79,uuid:_0xacba99,flow:_0x1e27ed,security:_0x3a7ea8,type:_0x596ee1,sni:_0xd9e5d1,fp:_0x594439,alpn:_0x5373f8,pbk:_0x15f51e,sid:_0x7cf24d,headerType:_0x5749fa,host:_0xd8566,path:_0x4d3a1e,serviceName:_0x49cc1d}=_0x3563c2,_0x40fc1e={'name':_0x40a6ce(0x16a),'type':_0x40a6ce(0x14e),'server':_0x7f9ce3,'port':+_0x382e79,'udp':!![],'uuid':_0xacba99,'flow':_0x1e27ed,'network':_0x596ee1,'dialer-proxy':'ðŸ’¦\x20Best\x20Ping\x20ðŸ’¥'};if(_0x3a7ea8===_0x40a6ce(0x15f)){const _0x48c2b7=_0x5373f8?_0x5373f8?.['split'](','):[];Object['assign'](_0x40fc1e,{'tls':!![],'servername':_0xd9e5d1,'alpn':_0x48c2b7,'client-fingerprint':_0x594439});}if(_0x3a7ea8===_0x40a6ce(0x175))Object[_0x40a6ce(0x141)](_0x40fc1e,{'tls':!![],'servername':_0xd9e5d1,'client-fingerprint':_0x594439,'reality-opts':{'public-key':_0x15f51e,'short-id':_0x7cf24d}});if(_0x5749fa===_0x40a6ce(0x138)){const _0x5caf33=_0x4d3a1e?.[_0x40a6ce(0x18e)](',');_0x40fc1e[_0x40a6ce(0x155)]={'method':_0x40a6ce(0x160),'path':_0x5caf33,'headers':{'Connection':[_0x40a6ce(0x151)],'Content-Type':[_0x40a6ce(0x12c)]}};}if(_0x596ee1==='ws'){const _0x150a59=_0x4d3a1e?.['split']('?ed=')[0x0],_0x223ade=+_0x4d3a1e?.[_0x40a6ce(0x18e)](_0x40a6ce(0x130))[0x1];_0x40fc1e[_0x40a6ce(0x162)]={'path':_0x150a59,'headers':{'Host':_0xd8566},'max-early-data':_0x223ade,'early-data-header-name':_0x40a6ce(0x18d)};}if(_0x596ee1===_0x40a6ce(0x11f))_0x40fc1e['grpc-opts']={'grpc-service-name':_0x49cc1d};return _0x40fc1e;}function a0_0x160c(){const _0x27b9b3=['https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/malware.txt','any:53','Trojan','ðŸ’¦\x20Chain\x20Best\x20Ping\x20ðŸ’¥','replace','interval','length','server','/32','rule-providers','2122295FovmRY','staticIPs','AND,((NETWORK,udp),(DST-PORT,443)),REJECT','no-store,\x20no-cache,\x20must-revalidate,\x20proxy-revalidate','reality','rule-set:','hosts','\x20-\x20WoW\x20ðŸŒ','\x20-\x20','70336BkdilH','An\x20error\x20occured\x20while\x20parsing\x20chain\x20proxy:\x20','fake-ip','ir-cidr','join','RULE-SET,','https://www.gstatic.com/generate_204','/128','ðŸ’¦\x20WoW\x20-\x20Best\x20Ping\x20ðŸš€','DIRECT','bestWarpInterval','match','yaml','[2606:4700:4700::1111]','direct','https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip','1.1.1.1','198.18.0.1/16','text/plain;charset=utf-8','Sec-WebSocket-Protocol','split','name','1042160JqoEFo',',no-resolve','[2606:4700:4700::1001]','cryptominers','3310DYBHVl','dialer-proxy','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ircidr.txt','trojanPassword','0.0.0.0:1053','log','proxy-groups','42ypFPBs','12lbcrGq','url-test','grpc','#proxy-1','ðŸ’¦\x20Warp\x20-\x20Best\x20Ping\x20ðŸš€','ads','includes','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml','127.0.0.1:9090','socks5','nameserver-policy','time.apple.com','filter','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ir.txt','1.0.0.1','application/octet-stream','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.yaml','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ru.yaml','ipcidr','?ed=','forEach','map','proxy-','#DIRECT','./ruleset/','no-store','http/1.1','http','15058802DRZcfi','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/phishing.txt','IP-CIDR6','ðŸ’¦\x20','#ðŸ’¦\x20Warp\x20-\x20Best\x20Ping\x20ðŸš€','proxies','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml','socks','assign','mixed','#âœ…\x20Selector','REJECT','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/ads.txt','https://raw.githubusercontent.com/Chocolate4U/Iran-clash-rules/release/cryptominers.txt','block','text','1046LoRqqY','rules','317JQEsFa','::/0','hostName','vless','327955HEjosX','defaultHttpsPorts','keep-alive','domain','userID','172.16.0.2/32','http-opts','/tr','DOMAIN-SUFFIX,','MATCH,âœ…\x20Selector','IP-CIDR','stringify','ru-cidr','push','private','parse','tls','GET','random','ws-opts','dns','5139qYPHgw','geosite:private','https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ru.yaml'];a0_0x160c=function(){return _0x27b9b3;};return a0_0x160c();}export async function getClashWarpConfig(_0x341c25,_0x34e180){const _0x4c0b07=a0_0x4f1f,{proxySettings:_0x16d9c9,warpConfigs:_0x5edcfc}=await getDataset(_0x341c25,_0x34e180),{warpEndpoints:_0x40cd6f}=_0x16d9c9,_0x10977b=structuredClone(clashConfigTemp);_0x10977b[_0x4c0b07(0x163)]=await buildClashDNS(_0x16d9c9,!![],!![]);const {rules:_0x121189,ruleProviders:_0x3f4d3b}=buildClashRoutingRules(_0x16d9c9);_0x10977b[_0x4c0b07(0x14a)]=_0x121189,_0x10977b[_0x4c0b07(0x170)]=_0x3f4d3b;const _0x25f8c1=_0x10977b[_0x4c0b07(0x11b)][0x0],_0x4181e9=_0x10977b[_0x4c0b07(0x11b)][0x1];_0x25f8c1[_0x4c0b07(0x13e)]=['ðŸ’¦\x20Warp\x20-\x20Best\x20Ping\x20ðŸš€',_0x4c0b07(0x182)],_0x4181e9['name']=_0x4c0b07(0x121),_0x4181e9[_0x4c0b07(0x16c)]=+_0x16d9c9[_0x4c0b07(0x184)],_0x10977b['proxy-groups'][_0x4c0b07(0x15c)](structuredClone(_0x4181e9));const _0x243d90=_0x10977b[_0x4c0b07(0x11b)][0x2];_0x243d90[_0x4c0b07(0x110)]=_0x4c0b07(0x182);let _0x25b6c2=[],_0x31fcce=[];return _0x40cd6f[_0x4c0b07(0x18e)](',')[_0x4c0b07(0x131)]((_0x1b9915,_0x2611bf)=>{const _0x48b284=_0x4c0b07,_0x56b4dd=_0x48b284(0x13c)+(_0x2611bf+0x1)+'\x20-\x20Warp\x20ðŸ‡®ðŸ‡·',_0x591a70=_0x48b284(0x13c)+(_0x2611bf+0x1)+_0x48b284(0x178),_0x587e54=buildClashWarpOutbound(_0x5edcfc,_0x56b4dd,_0x1b9915,''),_0x3013a5=buildClashWarpOutbound(_0x5edcfc,_0x591a70,_0x1b9915,_0x56b4dd);_0x10977b[_0x48b284(0x13e)][_0x48b284(0x15c)](_0x3013a5,_0x587e54),_0x25b6c2[_0x48b284(0x15c)](_0x56b4dd),_0x31fcce[_0x48b284(0x15c)](_0x591a70),_0x4181e9[_0x48b284(0x13e)][_0x48b284(0x15c)](_0x56b4dd),_0x243d90['proxies'][_0x48b284(0x15c)](_0x591a70);}),_0x25f8c1[_0x4c0b07(0x13e)][_0x4c0b07(0x15c)](..._0x25b6c2,..._0x31fcce),new Response(JSON[_0x4c0b07(0x15a)](_0x10977b,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x4c0b07(0x18c),'Cache-Control':_0x4c0b07(0x174),'CDN-Cache-Control':_0x4c0b07(0x136)}});}function a0_0x4f1f(_0x875cb2,_0x1078cd){const _0x160c64=a0_0x160c();return a0_0x4f1f=function(_0x4f1f0c,_0x1c4a46){_0x4f1f0c=_0x4f1f0c-0x110;let _0x33663f=_0x160c64[_0x4f1f0c];return _0x33663f;},a0_0x4f1f(_0x875cb2,_0x1078cd);}export async function getClashNormalConfig(_0x4623fd,_0x467ea3){const _0x48a79d=a0_0x4f1f,{proxySettings:_0x1cdb8d}=await getDataset(_0x4623fd,_0x467ea3);let _0x1756cd;const {resolvedRemoteDNS:_0xe762c8,cleanIPs:_0x1ba771,proxyIP:_0x499763,ports:_0xe239bd,vlessConfigs:_0x28ff78,trojanConfigs:_0x48d132,outProxy:_0x324d1b,outProxyParams:_0x4d419c,customCdnAddrs:_0x3302e2,customCdnHost:_0x2dfdfc,customCdnSni:_0x306b36,bestVLESSTrojanInterval:_0x4e1fe5,enableIPv6:_0x1fe3ad}=_0x1cdb8d;if(_0x324d1b){const _0x5b6262=JSON[_0x48a79d(0x15e)](_0x4d419c);try{_0x1756cd=buildClashChainOutbound(_0x5b6262);}catch(_0x4b8e2b){console[_0x48a79d(0x11a)](_0x48a79d(0x17b),_0x4b8e2b),_0x1756cd=undefined,await _0x467ea3['bpb']['put']('proxySettings',JSON[_0x48a79d(0x15a)]({..._0x1cdb8d,'outProxy':'','outProxyParams':{}}));}}const _0x1d60a1=structuredClone(clashConfigTemp);_0xe762c8[_0x48a79d(0x16e)]?_0x1d60a1['hosts']={[_0xe762c8[_0x48a79d(0x16e)]]:_0xe762c8[_0x48a79d(0x172)]}:delete _0x1d60a1[_0x48a79d(0x177)];const {rules:_0x44bfa9,ruleProviders:_0x1ae49f}=buildClashRoutingRules(_0x1cdb8d);_0x1d60a1['dns']=await buildClashDNS(_0x1cdb8d,_0x1756cd,![]),_0x1d60a1[_0x48a79d(0x14a)]=_0x44bfa9,_0x1d60a1[_0x48a79d(0x170)]=_0x1ae49f;const _0x5cc43c=_0x1d60a1[_0x48a79d(0x11b)][0x0],_0x59d4ae=_0x1d60a1[_0x48a79d(0x11b)][0x1];_0x5cc43c[_0x48a79d(0x13e)]=['ðŸ’¦\x20Best\x20Ping\x20ðŸ’¥'],_0x59d4ae[_0x48a79d(0x110)]='ðŸ’¦\x20Best\x20Ping\x20ðŸ’¥',_0x59d4ae[_0x48a79d(0x16c)]=+_0x4e1fe5;const _0xd1f7a=await getConfigAddresses(_0x1ba771,_0x1fe3ad),_0x482f23=_0x3302e2?_0x3302e2[_0x48a79d(0x18e)](','):[],_0x3e7131=[..._0xd1f7a,..._0x482f23];let _0x8081c=0x1,_0x26ef83;const _0x1bdb16=[..._0x28ff78?['VLESS']:[],..._0x48d132?[_0x48a79d(0x169)]:[]];return _0x1bdb16[_0x48a79d(0x131)](_0xc9e1ab=>{const _0x4f78a0=_0x48a79d;let _0xe0d345=0x1;_0xe239bd[_0x4f78a0(0x131)](_0x44b829=>{const _0x545144=_0x4f78a0;_0x3e7131[_0x545144(0x131)](_0x458bcf=>{const _0x1d27c5=_0x545144;let _0x20a2b5,_0x56f7db;const _0x619b=_0x482f23['includes'](_0x458bcf),_0x2758e7=_0x619b?'C':'',_0x8ccc04=_0x619b?_0x306b36:randomUpperCase(globalThis[_0x1d27c5(0x14d)]),_0xb9dc78=_0x619b?_0x2dfdfc:globalThis[_0x1d27c5(0x14d)],_0x3fc059=generateRemark(_0xe0d345,_0x44b829,_0x458bcf,_0x1ba771,_0xc9e1ab,_0x2758e7)[_0x1d27c5(0x16b)]('\x20:\x20',_0x1d27c5(0x179));_0xc9e1ab==='VLESS'&&(_0x26ef83='/'+getRandomPath(0x10)+(_0x499763?'/'+btoa(_0x499763):''),_0x20a2b5=buildClashVLESSOutbound(_0x1756cd?_0x1d27c5(0x133)+_0x8081c:_0x3fc059,_0x458bcf,_0x44b829,_0xb9dc78,_0x8ccc04,_0x26ef83,_0x619b),_0x1d60a1[_0x1d27c5(0x13e)]['push'](_0x20a2b5),_0x5cc43c[_0x1d27c5(0x13e)][_0x1d27c5(0x15c)](_0x3fc059),_0x59d4ae[_0x1d27c5(0x13e)][_0x1d27c5(0x15c)](_0x3fc059));_0xc9e1ab===_0x1d27c5(0x169)&&globalThis[_0x1d27c5(0x150)][_0x1d27c5(0x123)](_0x44b829)&&(_0x26ef83=_0x1d27c5(0x156)+getRandomPath(0x10)+(_0x499763?'/'+btoa(_0x499763):''),_0x56f7db=buildClashTrojanOutbound(_0x1756cd?_0x1d27c5(0x133)+_0x8081c:_0x3fc059,_0x458bcf,_0x44b829,_0xb9dc78,_0x8ccc04,_0x26ef83,_0x619b),_0x1d60a1[_0x1d27c5(0x13e)][_0x1d27c5(0x15c)](_0x56f7db),_0x5cc43c[_0x1d27c5(0x13e)][_0x1d27c5(0x15c)](_0x3fc059),_0x59d4ae[_0x1d27c5(0x13e)][_0x1d27c5(0x15c)](_0x3fc059));if(_0x1756cd){let _0x4b4cfe=structuredClone(_0x1756cd);_0x4b4cfe[_0x1d27c5(0x110)]=_0x3fc059,_0x4b4cfe[_0x1d27c5(0x116)]='proxy-'+_0x8081c,_0x1d60a1['proxies']['push'](_0x4b4cfe);}_0x8081c++,_0xe0d345++;});});}),new Response(JSON['stringify'](_0x1d60a1,null,0x4),{'status':0xc8,'headers':{'Content-Type':'text/plain;charset=utf-8','Cache-Control':_0x48a79d(0x174),'CDN-Cache-Control':'no-store'}});}const clashConfigTemp={'mixed-port':0x1ed2,'ipv6':!![],'allow-lan':!![],'mode':'rule','log-level':'warning','disable-keep-alive':![],'keep-alive-idle':0x1e,'keep-alive-interval':0x1e,'unified-delay':![],'geo-auto-update':!![],'geo-update-interval':0xa8,'external-controller':a0_0x172864(0x125),'external-ui-url':a0_0x172864(0x189),'external-ui':'ui','external-controller-cors':{'allow-origins':['*'],'allow-private-network':!![]},'profile':{'store-selected':!![],'store-fake-ip':!![]},'hosts':{},'dns':{},'tun':{'enable':!![],'stack':a0_0x172864(0x142),'auto-route':!![],'strict-route':!![],'auto-detect-interface':!![],'dns-hijack':[a0_0x172864(0x168)],'mtu':0x2328},'sniffer':{'enable':!![],'force-dns-mapping':!![],'parse-pure-ip':!![],'override-destination':![],'sniff':{'HTTP':{'ports':[0x50,0x1f90,0x22b0,0x804,0x822,0x826,0x82f]},'TLS':{'ports':[0x1bb,0x20fb,0x805,0x823,0x827,0x830]}}},'proxies':[],'proxy-groups':[{'name':'âœ…\x20Selector','type':'select','proxies':[]},{'name':'','type':a0_0x172864(0x11e),'url':a0_0x172864(0x180),'interval':0x1e,'tolerance':0x32,'proxies':[]}],'rule-providers':{},'rules':[],'ntp':{'enable':!![],'server':a0_0x172864(0x128),'port':0x7b,'interval':0x1e}};