function a0_0xdceb(_0x1a3014,_0x9773ee){const _0x428d84=a0_0x428d();return a0_0xdceb=function(_0xdcebd2,_0x2da853){_0xdcebd2=_0xdcebd2-0x73;let _0xe7f7df=_0x428d84[_0xdcebd2];return _0xe7f7df;},a0_0xdceb(_0x1a3014,_0x9773ee);}const a0_0x5ee952=a0_0xdceb;(function(_0x432b47,_0x47ac08){const _0x226234=a0_0xdceb,_0x5dcdcf=_0x432b47();while(!![]){try{const _0x293cbc=parseInt(_0x226234(0xf7))/0x1+-parseInt(_0x226234(0x8e))/0x2*(-parseInt(_0x226234(0x8b))/0x3)+parseInt(_0x226234(0xee))/0x4+parseInt(_0x226234(0xd0))/0x5*(-parseInt(_0x226234(0xe2))/0x6)+parseInt(_0x226234(0xdb))/0x7+parseInt(_0x226234(0x76))/0x8*(parseInt(_0x226234(0xd1))/0x9)+-parseInt(_0x226234(0x8d))/0xa;if(_0x293cbc===_0x47ac08)break;else _0x5dcdcf['push'](_0x5dcdcf['shift']());}catch(_0x2dde92){_0x5dcdcf['push'](_0x5dcdcf['shift']());}}}(a0_0x428d,0x5a168));function a0_0x428d(){const _0xf2b45a=['any','push','transport','172.18.0.1/28','Direct','proxy-1','ðŸ’¦\x20Warp','VLESS','interval','45sjbUsH','1746ZhskwZ','fdfe:dcba:9876::1/126','inet6_range','geosite-cryptominers','domain_suffix','version','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-malware.srs','rule_set','quic','splice','540512GnHZio','rcode://success','and','remote','198.18.0.0/15','logical','Trojan','522HQneAE','hiddify','reality','match','text/plain;charset=utf-8','http','udp','trojan','https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-category-ru.srs','?ed=','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-ir.srs','alpn','1845184PbtCQc','dns','geosite-category-ads-all','Sec-WebSocket-Protocol','-\x20Best\x20Ping\x20ðŸš€','defaultHttpsPorts','assign','length','AAAA','642592CkIQTj','Global','https://raw.githubusercontent.com/SagerNet/sing-geosite/rule-set/geosite-cn.srs','30m','forEach','ðŸ’¦\x20','trojanPassword','/tr','mixed-in','24744gzPyrx','geoip-phishing','0.0.0.0','selector','tun','warn','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-ir.srs','ipv4_only','urltest','ðŸ’¦\x20WoW','https://www.gstatic.com/generate_204','mixed','replace','fc00::/18','dns-fake','block','geosite-ir','randomized','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-phishing.srs','no-store,\x20no-cache,\x20must-revalidate,\x20proxy-revalidate','bestWarpInterval','6759ohOdjb','tls','16051210rHRGNG','172Gvglgj','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-phishing.srs','detour','dns-in','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-category-ads-all.srs','geosite-nsfw','proxy-','route','ip_cidr','stringify','filter','includes','tun-in','bpb','dns-remote','geoip-ru','geosite-cn','dns-block','\x20-\x20WoW\x20ðŸŒ','proxySettings','https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-ru.srs','geosite-category-ru','âœ…\x20Selector','rules','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-cryptominers.srs','geosite-malware','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geosite-nsfw.srs','direct','grpc','\x20Pro\x20','split','time.apple.com','https://raw.githubusercontent.com/Chocolate4U/Iran-sing-box-rules/rule-set/geoip-malware.srs','127.0.0.1:9090','outbounds','1.1.1.1','https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip','tls_fragment','hostName','\x20-\x20Warp\x20ðŸ‡®ðŸ‡·','log','http/1.1','servers','socks','tag','geoip-cn','protocol','no-store','wireguard','geoip-ir','binary','geosite-phishing','fakeip','dns-direct','prefer_ipv4','vless','GET'];a0_0x428d=function(){return _0xf2b45a;};return a0_0x428d();}import{getConfigAddresses,extractWireguardParams,generateRemark,randomUpperCase,getRandomPath,isIPv6}from'./helpers';import{getDataset}from'../kv/handlers';import{isDomain}from'../helpers/helpers';function buildSingBoxDNS(_0x3ff06c,_0x57f309,_0x5dd44f,_0x2cec75){const _0x48b2b7=a0_0xdceb,{remoteDNS:_0x3b94ef,localDNS:_0x5bd5ae,vlessTrojanFakeDNS:_0x10070c,enableIPv6:_0x1497e9,warpFakeDNS:_0x27db56,warpEnableIPv6:_0x5e7332,bypassIran:_0x5318fe,bypassChina:_0x5218ed,bypassRussia:_0x49e515,blockAds:_0x12d2b1,blockPorn:_0xc4d8c4,customBypassRules:_0x376e95,customBlockRules:_0x464518}=_0x3ff06c;let _0x91188;const _0x5ccf66=_0x10070c&&!_0x5dd44f||_0x27db56&&_0x5dd44f,_0x23f270=_0x1497e9&&!_0x5dd44f||_0x5e7332&&_0x5dd44f,_0x106ab2=_0x376e95[_0x48b2b7(0xac)](',')[_0x48b2b7(0x98)](_0x2a19ee=>isDomain(_0x2a19ee)),_0x7c9123=_0x464518[_0x48b2b7(0xac)](',')[_0x48b2b7(0x98)](_0x183f1c=>isDomain(_0x183f1c)),_0xdaad76=[{'rule':_0x5318fe,'type':_0x48b2b7(0xa9),'geosite':_0x48b2b7(0x86),'geoip':_0x48b2b7(0xbf)},{'rule':_0x5218ed,'type':_0x48b2b7(0xa9),'geosite':_0x48b2b7(0x9e),'geoip':_0x48b2b7(0xbb)},{'rule':_0x49e515,'type':_0x48b2b7(0xa9),'geosite':_0x48b2b7(0xa3),'geoip':_0x48b2b7(0x9d)},{'rule':!![],'type':_0x48b2b7(0x85),'geosite':'geosite-malware'},{'rule':!![],'type':'block','geosite':_0x48b2b7(0xc1)},{'rule':!![],'type':_0x48b2b7(0x85),'geosite':_0x48b2b7(0xd4)},{'rule':_0x12d2b1,'type':_0x48b2b7(0x85),'geosite':_0x48b2b7(0xf0)},{'rule':_0xc4d8c4,'type':_0x48b2b7(0x85),'geosite':_0x48b2b7(0x93)}],_0x14d5d1=[{'address':_0x5dd44f?_0x48b2b7(0xb1):_0x3b94ef,'address_resolver':_0x48b2b7(0xc3),'strategy':_0x23f270?_0x48b2b7(0xc4):'ipv4_only','detour':_0x2cec75,'tag':_0x48b2b7(0x9c)},{'address':_0x5bd5ae,'strategy':_0x23f270?_0x48b2b7(0xc4):_0x48b2b7(0x7d),'detour':_0x48b2b7(0xa9),'tag':_0x48b2b7(0xc3)},{'address':_0x48b2b7(0xdc),'tag':'dns-block'}];let _0x210eb1;if(_0x5dd44f)_0x210eb1={'outbound':_0x48b2b7(0xc7),'server':_0x48b2b7(0xc3)};else{const _0x4d6522=_0x57f309[_0x48b2b7(0x98)](_0x318254=>isDomain(_0x318254)),_0x371c34=[...new Set(_0x4d6522)];_0x210eb1={'domain':_0x371c34,'server':_0x48b2b7(0xc3)};}const _0x32a9b1=[_0x210eb1,{'clash_mode':'Direct','server':'dns-direct'},{'clash_mode':_0x48b2b7(0xf8),'server':_0x48b2b7(0x9c)}];let _0xa086d8={'disable_cache':!![],'rule_set':[],'server':_0x48b2b7(0x9f)};_0xdaad76[_0x48b2b7(0xfb)](({rule:_0x460051,type:_0x11b9d6,geosite:_0x17d17e,geoip:_0x2f6fab})=>{const _0x3d3346=_0x48b2b7;_0x460051&&_0x11b9d6===_0x3d3346(0xa9)&&_0x32a9b1[_0x3d3346(0xc8)]({'type':_0x3d3346(0xe0),'mode':_0x3d3346(0xdd),'rules':[{'rule_set':_0x17d17e},{'rule_set':_0x2f6fab}],'server':'dns-direct'}),_0x460051&&_0x11b9d6==='block'&&_0xa086d8[_0x3d3346(0xd8)][_0x3d3346(0xc8)](_0x17d17e);}),_0x32a9b1[_0x48b2b7(0xc8)](_0xa086d8);const _0x46b6fc=_0x3a2aa2=>({'domain_suffix':[],'server':_0x3a2aa2});let _0x4c5a65,_0x29d367;_0x106ab2['length']&&(_0x4c5a65=_0x46b6fc(_0x48b2b7(0xc3)),_0x106ab2[_0x48b2b7(0xfb)](_0x59c6ad=>{const _0x2e89a3=_0x48b2b7;_0x4c5a65[_0x2e89a3(0xd5)]['push'](_0x59c6ad);}),_0x32a9b1[_0x48b2b7(0xc8)](_0x4c5a65));_0x7c9123[_0x48b2b7(0xf5)]&&(_0x29d367=_0x46b6fc(_0x48b2b7(0x9f)),_0x7c9123[_0x48b2b7(0xfb)](_0x59f298=>{_0x29d367['domain_suffix']['push'](_0x59f298);}),_0x32a9b1['push'](_0x29d367));if(_0x5ccf66){_0x14d5d1[_0x48b2b7(0xc8)]({'address':_0x48b2b7(0xc2),'tag':_0x48b2b7(0x84)}),_0x32a9b1['push']({'disable_cache':!![],'inbound':_0x48b2b7(0x9a),'query_type':['A',_0x48b2b7(0xf6)],'server':_0x48b2b7(0x84)}),_0x91188={'enabled':!![],'inet4_range':_0x48b2b7(0xdf)};if(_0x23f270)_0x91188[_0x48b2b7(0xd3)]=_0x48b2b7(0x83);}return{'servers':_0x14d5d1,'rules':_0x32a9b1,'fakeip':_0x91188};}function buildSingBoxRoutingRules(_0x41538e){const _0x5090ef=a0_0xdceb,{bypassLAN:_0x110244,bypassIran:_0xd46e91,bypassChina:_0x26335a,bypassRussia:_0x3acf01,blockAds:_0x5cd7f1,blockPorn:_0x421181,blockUDP443:_0x29ed06,customBypassRules:_0x1e95a8,customBlockRules:_0x3520d4}=_0x41538e,_0x20542e=_0x1e95a8?_0x1e95a8['split'](','):[],_0x686900=_0x3520d4?_0x3520d4[_0x5090ef(0xac)](','):[],_0x101fa2=[{'type':'logical','mode':'or','rules':[{'inbound':_0x5090ef(0x91)},{'network':_0x5090ef(0xe8),'port':0x35}],'outbound':'dns-out'},{'clash_mode':_0x5090ef(0xcb),'outbound':_0x5090ef(0xa9)},{'clash_mode':_0x5090ef(0xf8),'outbound':_0x5090ef(0xa4)}],_0xc12787=[{'rule':_0xd46e91,'type':_0x5090ef(0xa9),'ruleSet':{'geosite':_0x5090ef(0x86),'geoip':_0x5090ef(0xbf),'geositeURL':_0x5090ef(0xec),'geoipURL':_0x5090ef(0x7c)}},{'rule':_0x26335a,'type':_0x5090ef(0xa9),'ruleSet':{'geosite':'geosite-cn','geoip':_0x5090ef(0xbb),'geositeURL':_0x5090ef(0xf9),'geoipURL':'https://raw.githubusercontent.com/SagerNet/sing-geoip/rule-set/geoip-cn.srs'}},{'rule':_0x3acf01,'type':'direct','ruleSet':{'geosite':_0x5090ef(0xa3),'geoip':_0x5090ef(0x9d),'geositeURL':_0x5090ef(0xea),'geoipURL':_0x5090ef(0xa2)}},{'rule':!![],'type':_0x5090ef(0x85),'ruleSet':{'geosite':_0x5090ef(0xa7),'geoip':'geoip-malware','geositeURL':_0x5090ef(0xd7),'geoipURL':_0x5090ef(0xae)}},{'rule':!![],'type':'block','ruleSet':{'geosite':'geosite-phishing','geoip':_0x5090ef(0x77),'geositeURL':_0x5090ef(0x88),'geoipURL':_0x5090ef(0x8f)}},{'rule':!![],'type':_0x5090ef(0x85),'ruleSet':{'geosite':'geosite-cryptominers','geositeURL':_0x5090ef(0xa6)}},{'rule':_0x5cd7f1,'type':'block','ruleSet':{'geosite':_0x5090ef(0xf0),'geositeURL':_0x5090ef(0x92)}},{'rule':_0x421181,'type':_0x5090ef(0x85),'ruleSet':{'geosite':_0x5090ef(0x93),'geositeURL':_0x5090ef(0xa8)}}],_0x40d321=[],_0x388c85=[],_0x25a295=[],_0x56d744=[],_0x3d9f61=[];_0x110244&&_0x388c85[_0x5090ef(0xc8)]({'ip_is_private':!![],'outbound':'direct'});const _0x499d7e=(_0x47dceb,_0x3daebc)=>({[_0x47dceb]:[],'outbound':_0x3daebc}),_0x45c5a8={'type':_0x5090ef(0xde),'tag':'','format':_0x5090ef(0xc0),'url':'','download_detour':_0x5090ef(0xa9)},_0x3a9984=_0x499d7e(_0x5090ef(0xd8),_0x5090ef(0xa9));;const _0x40b9f2=_0x499d7e('rule_set',_0x5090ef(0xa9));;const _0x5d8c22=_0x499d7e(_0x5090ef(0xd8),_0x5090ef(0x85)),_0x1335d7=_0x499d7e(_0x5090ef(0xd8),_0x5090ef(0x85));_0xc12787[_0x5090ef(0xfb)](({rule:_0x26b6e1,type:_0x28293d,ruleSet:_0x34e4b1})=>{const _0x441644=_0x5090ef;if(!_0x26b6e1)return;const {geosite:_0x24619f,geoip:_0x43578b,geositeURL:_0x1f4dc9,geoipURL:_0x115ddc}=_0x34e4b1,_0x15315a=_0x28293d==='direct',_0x471065=_0x15315a?_0x3a9984:_0x5d8c22,_0x253778=_0x15315a?_0x40b9f2:_0x1335d7;_0x471065[_0x441644(0xd8)][_0x441644(0xc8)](_0x24619f),_0x3d9f61[_0x441644(0xc8)]({..._0x45c5a8,'tag':_0x24619f,'url':_0x1f4dc9}),_0x43578b&&(_0x253778[_0x441644(0xd8)][_0x441644(0xc8)](_0x43578b),_0x3d9f61['push']({..._0x45c5a8,'tag':_0x43578b,'url':_0x115ddc}));});const _0x38c03a=(_0x20d78d,_0x108592)=>{const _0x3d0d0a=_0x5090ef;(_0x20d78d['rule_set']?.[_0x3d0d0a(0xf5)]||_0x20d78d[_0x3d0d0a(0xd5)]?.[_0x3d0d0a(0xf5)]||_0x20d78d[_0x3d0d0a(0x96)]?.[_0x3d0d0a(0xf5)])&&_0x108592['push'](_0x20d78d);};_0x38c03a(_0x3a9984,_0x40d321),_0x38c03a(_0x40b9f2,_0x388c85),_0x38c03a(_0x5d8c22,_0x25a295),_0x38c03a(_0x1335d7,_0x56d744);const _0x4783d5=(_0x252046,_0x3d3db5)=>{const _0xf151ba=_0x5090ef,_0x44b9ec=_0x499d7e(_0xf151ba(0xd5),_0x3d3db5),_0x5c12ee=_0x499d7e(_0xf151ba(0x96),_0x3d3db5);_0x252046[_0xf151ba(0xfb)](_0x1028d7=>{const _0x308f3f=_0xf151ba;if(isDomain(_0x1028d7))_0x44b9ec['domain_suffix'][_0x308f3f(0xc8)](_0x1028d7);else{const _0x4af7ac=isIPv6(_0x1028d7)?_0x1028d7[_0x308f3f(0x82)](/\[|\]/g,''):_0x1028d7;_0x5c12ee['ip_cidr'][_0x308f3f(0xc8)](_0x4af7ac);}}),_0x38c03a(_0x44b9ec,_0x3d3db5===_0xf151ba(0xa9)?_0x40d321:_0x25a295),_0x38c03a(_0x5c12ee,_0x3d3db5==='direct'?_0x388c85:_0x56d744);};_0x20542e[_0x5090ef(0xf5)]&&_0x4783d5(_0x20542e,_0x5090ef(0xa9)),_0x686900[_0x5090ef(0xf5)]&&_0x4783d5(_0x686900,_0x5090ef(0x85));const _0x1f2dae=[..._0x101fa2,..._0x40d321,..._0x388c85,..._0x25a295,..._0x56d744];return _0x29ed06&&_0x1f2dae[_0x5090ef(0xc8)]({'network':'udp','port':0x1bb,'protocol':_0x5090ef(0xd9),'outbound':'block'}),{'rules':_0x1f2dae,'rule_set':_0x3d9f61};}function buildSingBoxVLESSOutbound(_0x48ca27,_0x219888,_0x1bf169,_0x642537,_0x1075a8,_0x1c9ab3,_0x34743d,_0x3ee142){const _0xe945e1=a0_0xdceb,{enableIPv6:_0x41778d,lengthMin:_0x40e68a,lengthMax:_0x1d19d1,intervalMin:_0x105b60,intervalMax:_0xa0a1d1,proxyIP:_0x5b44d3}=_0x48ca27,_0x4ab1bc='/'+getRandomPath(0x10)+(_0x5b44d3?'/'+btoa(_0x5b44d3):''),_0x27103a=globalThis[_0xe945e1(0xf3)][_0xe945e1(0x99)](_0x642537)?!![]:![],_0x500fe3={'type':_0xe945e1(0xc5),'server':_0x1bf169,'server_port':+_0x642537,'domain_strategy':_0x41778d?_0xe945e1(0xc4):'ipv4_only','uuid':globalThis['userID'],'tls':{'alpn':_0xe945e1(0xb7),'enabled':!![],'insecure':_0x34743d,'server_name':_0x1c9ab3,'utls':{'enabled':!![],'fingerprint':_0xe945e1(0x87)}},'transport':{'early_data_header_name':'Sec-WebSocket-Protocol','max_early_data':0xa00,'headers':{'Host':_0x1075a8},'path':_0x4ab1bc,'type':'ws'},'tag':_0x219888};if(!_0x27103a)delete _0x500fe3[_0xe945e1(0x8c)];if(_0x3ee142)_0x500fe3[_0xe945e1(0xb3)]={'enabled':!![],'size':_0x40e68a+'-'+_0x1d19d1,'sleep':_0x105b60+'-'+_0xa0a1d1};return _0x500fe3;}function buildSingBoxTrojanOutbound(_0x48d636,_0x5066bb,_0x276c45,_0x41170e,_0xb60639,_0x87aead,_0x54eabf,_0x59caff){const _0xb29efc=a0_0xdceb,{enableIPv6:_0x1d00be,lengthMin:_0x22533c,lengthMax:_0x642fa9,intervalMin:_0x2bbe91,intervalMax:_0xeb00fa,proxyIP:_0xd7f2d2}=_0x48d636,_0x518f6f=_0xb29efc(0x74)+getRandomPath(0x10)+(_0xd7f2d2?'/'+btoa(_0xd7f2d2):''),_0x5eac4a=globalThis[_0xb29efc(0xf3)][_0xb29efc(0x99)](_0x41170e)?!![]:![],_0x476f29={'type':_0xb29efc(0xe9),'password':globalThis[_0xb29efc(0x73)],'server':_0x276c45,'server_port':+_0x41170e,'domain_strategy':_0x1d00be?'prefer_ipv4':_0xb29efc(0x7d),'tls':{'alpn':_0xb29efc(0xb7),'enabled':!![],'insecure':_0x54eabf,'server_name':_0x87aead,'utls':{'enabled':!![],'fingerprint':_0xb29efc(0x87)}},'transport':{'early_data_header_name':_0xb29efc(0xf1),'max_early_data':0xa00,'headers':{'Host':_0xb60639},'path':_0x518f6f,'type':'ws'},'tag':_0x5066bb};if(!_0x5eac4a)delete _0x476f29[_0xb29efc(0x8c)];if(_0x59caff)_0x476f29[_0xb29efc(0xb3)]={'enabled':!![],'size':_0x22533c+'-'+_0x642fa9,'sleep':_0x2bbe91+'-'+_0xeb00fa};return _0x476f29;}function buildSingBoxWarpOutbound(_0x57ca77,_0x2b42b1,_0x51e32a,_0x1c5c7f,_0x2588e9,_0x1417ab){const _0x4d923d=a0_0xdceb,_0x464e8d=/\[(.*?)\]/,_0x16f33e=/[^:]*$/,_0xc881dd=_0x1c5c7f[_0x4d923d(0x99)]('[')?_0x1c5c7f[_0x4d923d(0xe5)](_0x464e8d)[0x1]:_0x1c5c7f[_0x4d923d(0xac)](':')[0x0],_0x57143e=_0x1c5c7f[_0x4d923d(0x99)]('[')?+_0x1c5c7f[_0x4d923d(0xe5)](_0x16f33e)[0x0]:+_0x1c5c7f[_0x4d923d(0xac)](':')[0x1],{warpEnableIPv6:_0x4ca943,hiddifyNoiseMode:_0x3e878f,noiseCountMin:_0x4828a2,noiseCountMax:_0x13fc33,noiseSizeMin:_0x4b74ed,noiseSizeMax:_0x36ed92,noiseDelayMin:_0x549bac,noiseDelayMax:_0x213fa1}=_0x57ca77,{warpIPv6:_0x2a8450,reserved:_0x5046b9,publicKey:_0x429dd2,privateKey:_0x1733c5}=extractWireguardParams(_0x2b42b1,_0x2588e9),_0x2ee106={'local_address':['172.16.0.2/32',_0x2a8450],'mtu':0x500,'peer_public_key':_0x429dd2,'private_key':_0x1733c5,'reserved':_0x5046b9,'server':_0xc881dd,'server_port':_0x57143e,'domain_strategy':_0x4ca943?_0x4d923d(0xc4):_0x4d923d(0x7d),'type':_0x4d923d(0xbe),'detour':_0x2588e9,'tag':_0x51e32a};return _0x1417ab==='hiddify'&&Object[_0x4d923d(0xf4)](_0x2ee106,{'fake_packets_mode':_0x3e878f,'fake_packets':_0x4828a2===_0x13fc33?_0x4828a2:_0x4828a2+'-'+_0x13fc33,'fake_packets_size':_0x4b74ed===_0x36ed92?_0x4b74ed:_0x4b74ed+'-'+_0x36ed92,'fake_packets_delay':_0x549bac===_0x213fa1?_0x549bac:_0x549bac+'-'+_0x213fa1}),_0x2ee106;}function buildSingBoxChainOutbound(_0x396abd,_0x1e9f4a){const _0x2c1e72=a0_0xdceb;if([_0x2c1e72(0xb9),_0x2c1e72(0xe7)][_0x2c1e72(0x99)](_0x396abd[_0x2c1e72(0xbc)])){const {protocol:_0x220098,server:_0x56c5ca,port:_0x1aada4,user:_0x4d259a,pass:_0x412aa2}=_0x396abd,_0x47d751={'type':_0x220098,'tag':'','server':_0x56c5ca,'server_port':+_0x1aada4,'username':_0x4d259a,'password':_0x412aa2,'detour':''};if(_0x220098==='socks')_0x47d751[_0x2c1e72(0xd6)]='5';return _0x47d751;}const {server:_0xffbca3,port:_0x4aa2aa,uuid:_0x35756b,flow:_0x379b79,security:_0x768816,type:_0x1fef18,sni:_0x422080,fp:_0x37dd55,alpn:_0x4bc7e0,pbk:_0x38aaa3,sid:_0x267801,headerType:_0x1ebdc5,host:_0x2936da,path:_0x496eb7,serviceName:_0x5c0f6f}=_0x396abd,_0x29f0c4={'type':_0x2c1e72(0xc5),'tag':'','server':_0xffbca3,'server_port':+_0x4aa2aa,'domain_strategy':_0x1e9f4a?_0x2c1e72(0xc4):_0x2c1e72(0x7d),'uuid':_0x35756b,'flow':_0x379b79,'detour':''};if(_0x768816===_0x2c1e72(0x8c)||_0x768816==='reality'){const _0x434185=_0x4bc7e0?_0x4bc7e0?.[_0x2c1e72(0xac)](',')['filter'](_0x4f8778=>_0x4f8778!=='h2'):[];_0x29f0c4['tls']={'enabled':!![],'server_name':_0x422080,'insecure':![],'alpn':_0x434185,'utls':{'enabled':!![],'fingerprint':_0x37dd55}},_0x768816===_0x2c1e72(0xe4)&&(_0x29f0c4[_0x2c1e72(0x8c)][_0x2c1e72(0xe4)]={'enabled':!![],'public_key':_0x38aaa3,'short_id':_0x267801},delete _0x29f0c4['tls'][_0x2c1e72(0xed)]);}if(_0x1ebdc5===_0x2c1e72(0xe7)){const _0x38c4b1=_0x2936da?.['split'](',');_0x29f0c4[_0x2c1e72(0xc9)]={'type':_0x2c1e72(0xe7),'host':_0x38c4b1,'path':_0x496eb7,'method':_0x2c1e72(0xc6),'headers':{'Connection':['keep-alive'],'Content-Type':['application/octet-stream']}};}if(_0x1fef18==='ws'){const _0x31eae1=_0x496eb7?.[_0x2c1e72(0xac)]('?ed=')[0x0],_0x3e80a6=+_0x496eb7?.[_0x2c1e72(0xac)](_0x2c1e72(0xeb))[0x1]||0x0;_0x29f0c4[_0x2c1e72(0xc9)]={'type':'ws','path':_0x31eae1,'headers':{'Host':_0x2936da},'max_early_data':_0x3e80a6,'early_data_header_name':_0x2c1e72(0xf1)};}if(_0x1fef18==='grpc')_0x29f0c4[_0x2c1e72(0xc9)]={'type':_0x2c1e72(0xaa),'service_name':_0x5c0f6f};return _0x29f0c4;}export async function getSingBoxWarpConfig(_0x3defe4,_0x28dffb,_0x49b6aa){const _0x205196=a0_0xdceb,{proxySettings:_0x24bb14,warpConfigs:_0x570328}=await getDataset(_0x3defe4,_0x28dffb),{warpEndpoints:_0x1b3f75}=_0x24bb14,_0x43c461=structuredClone(singboxConfigTemp),_0xd3a225=_0x49b6aa===_0x205196(0xe3)?_0x205196(0xab):'\x20',_0x2f1835=buildSingBoxDNS(_0x24bb14,undefined,!![],_0x205196(0xcd)+_0xd3a225+_0x205196(0xf2)),{rules:_0x17d3d1,rule_set:_0x34d733}=buildSingBoxRoutingRules(_0x24bb14);_0x43c461[_0x205196(0xef)][_0x205196(0xb8)]=_0x2f1835['servers'],_0x43c461[_0x205196(0xef)][_0x205196(0xa5)]=_0x2f1835[_0x205196(0xa5)];if(_0x2f1835[_0x205196(0xc2)])_0x43c461[_0x205196(0xef)][_0x205196(0xc2)]=_0x2f1835['fakeip'];_0x43c461[_0x205196(0x95)]['rules']=_0x17d3d1,_0x43c461[_0x205196(0x95)][_0x205196(0xd8)]=_0x34d733;const _0x452a0a=_0x43c461[_0x205196(0xb0)][0x0],_0x175878=_0x43c461[_0x205196(0xb0)][0x1];_0x452a0a[_0x205196(0xb0)]=[_0x205196(0xcd)+_0xd3a225+_0x205196(0xf2),_0x205196(0x7f)+_0xd3a225+'-\x20Best\x20Ping\x20ðŸš€'],_0x43c461[_0x205196(0xb0)][_0x205196(0xda)](0x2,0x0,structuredClone(_0x175878));const _0x3ef825=_0x43c461[_0x205196(0xb0)][0x2];_0x175878['tag']=_0x205196(0xcd)+_0xd3a225+_0x205196(0xf2),_0x175878[_0x205196(0xcf)]=_0x24bb14['bestWarpInterval']+'s',_0x3ef825[_0x205196(0xba)]=_0x205196(0x7f)+_0xd3a225+_0x205196(0xf2),_0x3ef825[_0x205196(0xcf)]=_0x24bb14[_0x205196(0x8a)]+'s';const _0x368070=[],_0x353d33=[];return _0x1b3f75['split'](',')[_0x205196(0xfb)]((_0x592b07,_0x271f4b)=>{const _0x3d1f56=_0x205196,_0xd96105=_0x3d1f56(0xfc)+(_0x271f4b+0x1)+_0x3d1f56(0xb5),_0xf6caaa='ðŸ’¦\x20'+(_0x271f4b+0x1)+_0x3d1f56(0xa0),_0x6dc1f7=buildSingBoxWarpOutbound(_0x24bb14,_0x570328,_0xd96105,_0x592b07,'',_0x49b6aa),_0x34f4a1=buildSingBoxWarpOutbound(_0x24bb14,_0x570328,_0xf6caaa,_0x592b07,_0xd96105,_0x49b6aa);_0x43c461[_0x3d1f56(0xb0)][_0x3d1f56(0xc8)](_0x34f4a1,_0x6dc1f7),_0x368070[_0x3d1f56(0xc8)](_0xd96105),_0x353d33[_0x3d1f56(0xc8)](_0xf6caaa),_0x175878['outbounds'][_0x3d1f56(0xc8)](_0xd96105),_0x3ef825[_0x3d1f56(0xb0)]['push'](_0xf6caaa);}),_0x452a0a[_0x205196(0xb0)][_0x205196(0xc8)](..._0x368070,..._0x353d33),new Response(JSON[_0x205196(0x97)](_0x43c461,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x205196(0xe6),'Cache-Control':_0x205196(0x89),'CDN-Cache-Control':_0x205196(0xbd)}});}export async function getSingBoxCustomConfig(_0x534839,_0x1e5579,_0x5820aa){const _0x5d0c9d=a0_0xdceb,{proxySettings:_0xdf3a9b}=await getDataset(_0x534839,_0x1e5579);let _0x485efe;const {cleanIPs:_0xe2dee7,ports:_0x260da9,vlessConfigs:_0x53e369,trojanConfigs:_0x4994a0,outProxy:_0x10b628,outProxyParams:_0x40fee4,customCdnAddrs:_0x168ec3,customCdnHost:_0x5e8ad9,customCdnSni:_0x301357,bestVLESSTrojanInterval:_0x2411d7,enableIPv6:_0x541a51}=_0xdf3a9b;if(_0x10b628){const _0x4f271c=JSON['parse'](_0x40fee4);try{_0x485efe=buildSingBoxChainOutbound(_0x4f271c,_0x541a51);}catch(_0x5ab50f){console[_0x5d0c9d(0xb6)]('An\x20error\x20occured\x20while\x20parsing\x20chain\x20proxy:\x20',_0x5ab50f),_0x485efe=undefined,await _0x1e5579[_0x5d0c9d(0x9b)]['put'](_0x5d0c9d(0xa1),JSON[_0x5d0c9d(0x97)]({..._0xdf3a9b,'outProxy':'','outProxyParams':{}}));}}const _0x294150=await getConfigAddresses(_0xe2dee7,_0x541a51),_0x3324bc=_0x168ec3?_0x168ec3[_0x5d0c9d(0xac)](','):[],_0x49ef85=[..._0x294150,..._0x3324bc],_0x30804c=structuredClone(singboxConfigTemp),_0x29f007=buildSingBoxDNS(_0xdf3a9b,_0x49ef85,![],_0x485efe?_0x5d0c9d(0xcc):_0x5d0c9d(0xa4)),{rules:_0x58f635,rule_set:_0x27c6ba}=buildSingBoxRoutingRules(_0xdf3a9b);_0x30804c[_0x5d0c9d(0xef)]['servers']=_0x29f007['servers'],_0x30804c[_0x5d0c9d(0xef)]['rules']=_0x29f007['rules'];if(_0x29f007['fakeip'])_0x30804c['dns'][_0x5d0c9d(0xc2)]=_0x29f007[_0x5d0c9d(0xc2)];_0x30804c[_0x5d0c9d(0x95)][_0x5d0c9d(0xa5)]=_0x58f635,_0x30804c[_0x5d0c9d(0x95)][_0x5d0c9d(0xd8)]=_0x27c6ba;const _0x24cc26=_0x30804c[_0x5d0c9d(0xb0)][0x0],_0x3bff5f=_0x30804c['outbounds'][0x1];_0x24cc26[_0x5d0c9d(0xb0)]=['ðŸ’¦\x20Best\x20Ping\x20ðŸ’¥'],_0x3bff5f['interval']=_0x2411d7+'s',_0x3bff5f['tag']='ðŸ’¦\x20Best\x20Ping\x20ðŸ’¥';const _0x12ce3c=_0x260da9[_0x5d0c9d(0x98)](_0xf88357=>_0x5820aa?globalThis[_0x5d0c9d(0xf3)][_0x5d0c9d(0x99)](_0xf88357):!![]);let _0x2b1aa9=0x1;const _0x974a58=[..._0x53e369?[_0x5d0c9d(0xce)]:[],..._0x4994a0?[_0x5d0c9d(0xe1)]:[]];return _0x974a58[_0x5d0c9d(0xfb)](_0x2c88ec=>{const _0x57479c=_0x5d0c9d;let _0x4b818c=0x1;_0x12ce3c[_0x57479c(0xfb)](_0x33a4b3=>{const _0x2d42d0=_0x57479c;_0x49ef85[_0x2d42d0(0xfb)](_0x378a81=>{const _0x2e155e=_0x2d42d0;let _0x40e3e4,_0x5081f7;const _0x91af9a=_0x3324bc['includes'](_0x378a81),_0x1d1ba6=_0x91af9a?'C':_0x5820aa?'F':'',_0x34c076=_0x91af9a?_0x301357:randomUpperCase(globalThis[_0x2e155e(0xb4)]),_0x3325df=_0x91af9a?_0x5e8ad9:globalThis[_0x2e155e(0xb4)],_0x5c1839=generateRemark(_0x4b818c,_0x33a4b3,_0x378a81,_0xe2dee7,_0x2c88ec,_0x1d1ba6);_0x2c88ec===_0x2e155e(0xce)&&(_0x40e3e4=buildSingBoxVLESSOutbound(_0xdf3a9b,_0x485efe?'proxy-'+_0x2b1aa9:_0x5c1839,_0x378a81,_0x33a4b3,_0x3325df,_0x34c076,_0x91af9a,_0x5820aa),_0x30804c['outbounds'][_0x2e155e(0xc8)](_0x40e3e4));_0x2c88ec===_0x2e155e(0xe1)&&(_0x5081f7=buildSingBoxTrojanOutbound(_0xdf3a9b,_0x485efe?'proxy-'+_0x2b1aa9:_0x5c1839,_0x378a81,_0x33a4b3,_0x3325df,_0x34c076,_0x91af9a,_0x5820aa),_0x30804c[_0x2e155e(0xb0)][_0x2e155e(0xc8)](_0x5081f7));if(_0x485efe){const _0x15fc0a=structuredClone(_0x485efe);_0x15fc0a[_0x2e155e(0xba)]=_0x5c1839,_0x15fc0a[_0x2e155e(0x90)]=_0x2e155e(0x94)+_0x2b1aa9,_0x30804c[_0x2e155e(0xb0)]['push'](_0x15fc0a);}_0x24cc26[_0x2e155e(0xb0)][_0x2e155e(0xc8)](_0x5c1839),_0x3bff5f[_0x2e155e(0xb0)][_0x2e155e(0xc8)](_0x5c1839),_0x2b1aa9++,_0x4b818c++;});});}),new Response(JSON[_0x5d0c9d(0x97)](_0x30804c,null,0x4),{'status':0xc8,'headers':{'Content-Type':_0x5d0c9d(0xe6),'Cache-Control':_0x5d0c9d(0x89),'CDN-Cache-Control':_0x5d0c9d(0xbd)}});}const singboxConfigTemp={'log':{'level':a0_0x5ee952(0x7b),'timestamp':!![]},'dns':{'servers':[],'rules':[],'independent_cache':!![]},'inbounds':[{'type':a0_0x5ee952(0xa9),'tag':a0_0x5ee952(0x91),'listen':a0_0x5ee952(0x78),'listen_port':0x1932,'override_address':'1.1.1.1','override_port':0x35},{'type':a0_0x5ee952(0x7a),'tag':'tun-in','address':[a0_0x5ee952(0xca),a0_0x5ee952(0xd2)],'mtu':0x2328,'auto_route':!![],'strict_route':!![],'stack':a0_0x5ee952(0x81),'endpoint_independent_nat':!![],'sniff':!![],'sniff_override_destination':!![]},{'type':a0_0x5ee952(0x81),'tag':a0_0x5ee952(0x75),'listen':a0_0x5ee952(0x78),'listen_port':0x820,'sniff':!![],'sniff_override_destination':![]}],'outbounds':[{'type':a0_0x5ee952(0x79),'tag':a0_0x5ee952(0xa4),'outbounds':[]},{'type':a0_0x5ee952(0x7e),'tag':'','outbounds':[],'url':a0_0x5ee952(0x80),'interval':''},{'type':a0_0x5ee952(0xa9),'tag':'direct'},{'type':'block','tag':a0_0x5ee952(0x85)},{'type':a0_0x5ee952(0xef),'tag':'dns-out'}],'route':{'rules':[],'rule_set':[],'auto_detect_interface':!![],'override_android_vpn':!![],'final':a0_0x5ee952(0xa4)},'ntp':{'enabled':!![],'server':a0_0x5ee952(0xad),'server_port':0x7b,'detour':a0_0x5ee952(0xa9),'interval':a0_0x5ee952(0xfa)},'experimental':{'cache_file':{'enabled':!![],'store_fakeip':!![]},'clash_api':{'external_controller':a0_0x5ee952(0xaf),'external_ui':'ui','external_ui_download_url':a0_0x5ee952(0xb2),'external_ui_download_detour':a0_0x5ee952(0xa9),'default_mode':'Rule'}}};